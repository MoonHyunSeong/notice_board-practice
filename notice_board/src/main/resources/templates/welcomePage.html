<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>WelcomePage</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<style>

    .wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .banner {
        width: 15%;
    }

    main{
        width: 70%;
    }


</style>

<script>
    $(document).ready(function() {
        loadRecentPosts(); // 페이지가 로드될 때 최신 글 5개씩을 가져옵니다.

        function loadRecentPosts() {
            var categories = ['programming', 'culture', 'travel', 'food'];

            $.each(categories, function(index, category) {
                $.ajax({
                    url: '/board/recentPosts/' + category, // 실제로 데이터를 가져올 URL을 지정해야 합니다.
                    method: 'GET',
                    dataType: 'json',
                    success: function(response) {
                        updatePostList(category, response); // 응답을 받아서 해당 카테고리의 게시글 목록을 업데이트합니다.
                    },
                    error: function() {
                        console.log('Failed to load recent posts for category: ' + category); // 요청이 실패한 경우 에러 메시지를 출력합니다.
                    }
                });
            });
        }

        function updatePostList(category, posts) {
            var $postList = $('#' + category + '-post-list'); // 해당 카테고리의 게시글 목록이 표시될 엘리먼트의 ID를 지정해야 합니다.

            // 게시글 목록을 비우고 새로운 게시글을 추가합니다.
            $postList.empty();
            $.each(posts, function(index, post) {
                var $postItem = $('<li>')
                    /*.append($('<div>').append($('<div>').append($('<a>').attr('href', '/member/profile/' + member.id).text(member.userid)))
                        .append($('<div>').append($('<div>').text(post.likes))))*/
                    .append($('<div>').append($('<a>').attr('href', '/board/post/' + post.id).text(post.title)));
                $postList.append($postItem);
            });
        }
    });

</script>

<body>
<body>


    <div th:replace="~{fragments/header :: header}"></div>

    <div class="wrapper">
        <div class="banner">
            왼쪽 배너 임마
        </div>

        <main th:replace="~{fragments/contents :: main}"></main>

        <div class="banner">
            오른쪽 배너 임마
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>